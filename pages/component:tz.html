<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html">
  <meta name="description" content="Compilation of extracted CSS styles on the SCP Wiki">
  <meta name="keywords" content="scp,wiki,styles,wikidot">
  <meta name="author" content="SCP Wiki">
  <meta name="generator" content="wikidot-css-extractor">

  <script src="https://tristen.ca/tablesort/dist/tablesort.min.js"></script>
<script src="https://tristen.ca/tablesort/dist/sorts/tablesort.number.min.js"></script>
<script src="https://emmiegit.github.io/wikidot-css-extractor/static/script.js" async></script>
  <link rel="stylesheet" href="https://tristen.ca/tablesort/tablesort.css">
<link rel="stylesheet" href="https://emmiegit.github.io/wikidot-css-extractor/static/style.css">

  <title>Timezone Converter</title>
</head>
<body>
<div id="container">
  
  <div class="page">
    <h1 class="title">Timezone Converter</h1>
    <p>
      Link to article: <a href="https://scp-wiki.wikidot.com/component:tz" target="_blank">Timezone Converter</a>.
    </p>

    <h2 class="header">Module Styles</h2>
    <ul class="module-styles">
      
        <li>
          <pre><code>td { vertical-align: top; }
.options table.wiki-content-table td { border: none; padding: 0.7em 1em; }</code></pre>
        </li>
      
        <li>
          <pre><code>@import url(https://scp-wiki.wikidot.com/local--code/component%3Atz/2);</code></pre>
        </li>
      
    </ul>

    <h2 class="header">Inline Styles</h2>
    <ul class="inline-styles">
      
        <li>
          <pre><code>border: 1px solid #ddd; padding: 1em;</code></pre>
        </li>
      
    </ul>

    <h2 class="header">Includes</h2>
    <ul class="includes">
      
        <li>
  
  

  
    <a href="https://scp-wiki.wikidot.com/component:croqstyle" target="_blank"><code>:scp-wiki:component:croqstyle</code></a>
  

  
    
  <span class="page-info">
    [<a href="/wikidot-css-extractor/pages/component:croqstyle.html" target="_blank">info</a>]
  </span>

  
</li>
      
    </ul>

    <h2 class="header">CSS Classes</h2>
    <ul class="css-classes">
      
        <li>
          <pre><code>code</code></pre>
        </li>
      
        <li>
          <pre><code>options</code></pre>
        </li>
      
        <li>
          <pre><code>timezone-thingy</code></pre>
        </li>
      
    </ul>

    <h2 class="header">Page Source</h2>
    <pre><textarea class="page-source" readonly>[[iftags +component]]

[[include :scp-wiki:component:croqstyle -=- ]]

[[module CSS]]
td { vertical-align: top; }
.options table.wiki-content-table td { border: none; padding: 0.7em 1em; }
[[/module]]

[[div style=&#34;border: 1px solid #ddd; padding: 1em;&#34;]]
+ What this is

A component that displays a given time and/or date in the reader&#39;s timezone.

The reader&#39;s timezone will be automatically calculated. All you need to do is input the timezone of the time you want on the page.

If your timezone matches the reader&#39;s timezone, this module will not appear. This is intentional! It will still be there for readers who need it.

Please note the following Daylight Savings Time exceptions: both &#34;EST&#34; and &#34;EDT&#34;, when entered into this component, are converted to the America/New_York timezone, which is then converted to either EST or EDT depending on the time of year. &#34;BST&#34; is converted to Europe/London, which is then converted to either GMT or BST depending on the time of year. To avoid this confusion, **please avoid using timezones that vary depending on DST!** Use a static timezone like UTC.

[[=]]
[http://scp-sandbox-3.wikidot.com/tz-demo &gt;&gt;&gt; DEMO &lt;&lt;&lt;]
[[/=]]

+ Usage

On any wiki:

[[div class=&#34;code&#34;]]
##blue|**[[include :scp-wiki:component:tz**##
##blue|**|**## ##green|time####blue|**=**##18:00
##blue|**|**## ##green|tz####blue|**=**##UTC
##blue|**]]**##
[[/div]]

A setting in //italics// is //optional//. Everything else you gotta have. If you omit an //optional// setting, then it will have its default value. If you omit a non-optional setting, then don&#39;t expect the component to work properly.

To omit a setting, leave it out completely.

[[div class=&#34;options&#34;]]
|| **time** || The time of the event. Times should be two digits followed by a colon followed by two digits. &#34;18:30&#34; is good. &#34;1830&#34;, &#34;6:30 PM&#34; and &#34;half past six in the afternoon&#34; are bad. ||
|| **//tz//** _
//(Optional)// || The timezone of the time that you&#39;re entering. _
//Default value: UTC// ||
|| **//date//** _
//(Optional)// || The date of the event in ISO format: YYYY-MM-DD. _
The date might be used at some point to calculate &#34;time until&#34; stuff, but right now it&#39;s unused. _
//Default value: today// ||
|| **//text_before//** _
//(Optional)// || The text that comes before the converted time. _
//Default value: &#34;${time} ${tz} is &#34;// ||
|| **//text_after//** _
//(Optional)// || The text that comes after the converted time. _
//Default value: &#34;.&#34;// ||
[[/div]]

[[/div]]

-----

[[/iftags]]

[[div_ class=&#34;timezone-thingy&#34;]]
[[html]]
&lt;head&gt;
  &lt;script type=&#34;text/javascript&#34;&gt;
    let date = &#34;{$date}&#34;;
    let time = &#34;{$time}&#34;;
    let tz = &#34;{$tz}&#34;;
    let text_before = &#34;{$text_before}&#34;;
    let text_after = &#34;{$text_after}&#34;;
  &lt;/script&gt;
  &lt;script src=&#34;https://scp-wiki.wdfiles.com/local--files/component%3Atz/moment.min.js&#34;&gt;&lt;/script&gt;
  &lt;script src=&#34;https://scp-wiki.wdfiles.com/local--files/component%3Atz/moment-timezone-with-data-10-year-range.min.js&#34;&gt;&lt;/script&gt;
  &lt;script src=&#34;https://scp-wiki.wikidot.com/local--code/component%3Atz/1&#34;&gt;&lt;/script&gt;
  &lt;link href=&#34;https://d3g0gp89917ko0.cloudfront.net/v--edac79f846ba/common--theme/base/css/style.css&#34; rel=&#34;stylesheet&#34;&gt;
  &lt;link href=&#34;https://scp-wiki.wikidot.com/local--code/component%3Atheme/1&#34; rel=&#34;stylesheet&#34;&gt;
  &lt;link href=&#34;https://scp-wiki.wikidot.com/local--code/component%3Atz/3&#34; rel=&#34;stylesheet&#34;&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&#34;wrapper&#34;&gt;
    &lt;p&gt;&lt;img src=&#34;https://scp-wiki.wdfiles.com/local--files/component%3Atz/world.png&#34;&gt;&lt;img src=&#34;https://scp-wiki.wdfiles.com/local--files/component%3Atz/clock.png&#34;&gt; &lt;span id=&#34;text_before&#34;&gt;&lt;/span&gt;&lt;span id=&#34;text_converted&#34;&gt;&lt;/span&gt;&lt;span id=&#34;text_after&#34;&gt;&lt;/span&gt;&lt;/p&gt;
  &lt;/div&gt;
&lt;/body&gt;
[[/html]]
[[/div]]

[[module CSS]]
@import url(https://scp-wiki.wikidot.com/local--code/component%3Atz/2);
[[/module]]

[[iftags +component]]
~~~~~

-----

+ Codebase

++ HTML structure of the converter

Unfortunately this is buried in the source code - you&#39;ll have to go digging for it!

++ JS to operate the converter
[[code type=&#34;javascript&#34;]]
document.addEventListener(&#34;DOMContentLoaded&#34;, function() {
  console.log(date);
  date = date === &#34;{$date}&#34; ? moment().format(&#34;Y-MM-DD&#34;) : date;
  console.log(date);
  tz = tz === &#34;{$tz}&#34; ? &#34;UTC&#34; : tz;
  tz = tz === &#34;EST&#34; ? &#34;America/New_York&#34; : tz;
  tz = tz === &#34;EDT&#34; ? &#34;America/New_York&#34; : tz;
  tz = tz === &#34;BST&#34; ? &#34;Europe/London&#34; : tz;

  given_time = moment.tz(date + &#34; &#34; + time, tz);
  tz = given_time.format(&#34;z&#34;);

  text_before = text_before === &#34;{$text_before}&#34; ? &#34;${time} ${tz} is &#34; : 
text_before;
  text_after = text_after === &#34;{$text_after}&#34; ? &#34;.&#34; : text_after;
  // eval is used here to convert text strings to template literals
  // variables of the form ${var} will be parsed
  text_before = eval(&#39;`&#39; + text_before + &#39;`&#39;);
  text_after = eval(&#39;`&#39; + text_after + &#39;`&#39;);

  user_tz = Intl.DateTimeFormat().resolvedOptions().timeZone;
  converted_time = given_time.tz(user_tz);
  converted_time_tz = converted_time.format(&#34;HH:mm z&#34;);

  console.log(given_time);
  console.log(converted_time);

  document.getElementById(&#34;text_before&#34;).textContent = text_before;
  document.getElementById(&#34;text_converted&#34;).textContent = converted_time_tz;
  document.getElementById(&#34;text_after&#34;).textContent = text_after;

  if (converted_time.format(&#34;z&#34;) === tz) {
    // e.g. displaying an EST time to an EST user - that&#39;s pointless!
    document.documentElement.style.display = &#39;none&#39;;
  }
});
[[/code]]

++ CSS to style the output wrapper
[[code type=&#34;css&#34;]]
.timezone-thingy { margin-top: -0.5rem; }
.timezone-thingy iframe { border: none; max-height: 3.5rem; }
[[/code]]

++ CSS to style the output internally
[[code type=&#34;css&#34;]]
#wrapper {
  padding: 0.5rem !important;
  border: 1px solid #660000;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(102,0,0,.5);
  background: white;
  margin: 0.5rem 0;
  display: inline-block;
  position: relative;
  left: 50%;
  transform: translateX(-50%);
}
#wrapper p {
  margin: 0;
}
#wrapper img {
  height: 1rem;
  vertical-align: text-top;
}
[[/code]]

[[/iftags]]</textarea></pre>
  </div>

</div>

<div id="footer">
  
    <em>Last updated 2022-10-27 18:20:45.925022.</em>
  
</div>
</body>